---
title: 4.5 微服务开发测试提效最佳实践
keywords: [ SCA ]
description: 本文是阿里云微服务引擎MSE在微服务开发测试提效最佳实践介绍。前提条件：微服务应用已接入MSE下面我们来体验一下，MSE上如何使用微服务测试的能力。操作步骤步骤一： 接入 MSE 微服务治理安装 mse-ack-pilot 登录容器服务控制台。在左侧导航栏单击市场 > 应用目录。在应用目录页面...
---
本文是阿里云微服务引擎MSE在微服务开发测试提效最佳实践介绍。

前提条件：微服务应用已接入MSE

下面我们来体验一下，MSE上如何使用微服务测试的能力。
<a name="VIqk2"></a>
## 操作步骤

<a name="CSf5y"></a>
### 步骤一： 接入 MSE 微服务治理

1. 安装 mse-ack-pilot 
   1. 登录[容器服务控制台](cs.console.aliyun.com)。
   2. 在左侧导航栏单击**市场** > **应用目录**。
   3. 在应用目录页面点击**阿里云应用**，选择**微服务**，并单击 **ack-mse-pilot**。
   4. 在ack-mse-pilot页面右侧集群列表中选择集群，然后单击创建。<br />![](https://intranetproxy.alipay.com/skylark/lark/0/2022/png/83415/1645599572061-cb49410f-38ff-40d0-85db-b0bf420ea042.png#clientId=u2960782d-e104-4&id=eTEAY&originHeight=382&originWidth=523&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=uf49ed3a3-dc00-482e-b623-5651bdc8cae&title=)

安装MSE微服务治理组件大约需要2分钟，请耐心等待。<br />创建成功后，会自动跳转到目标集群的**Helm**页面，检查安装结果。如果出现以下页面，展示相关资源，则说明安装成功。

![](https://intranetproxy.alipay.com/skylark/lark/0/2022/png/83415/1645599572091-0723c979-0dbf-43e1-b83b-079e06d557ed.png#clientId=u2960782d-e104-4&id=CYtKD&originHeight=1172&originWidth=2998&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=ue0c2ab7f-fd4d-45f3-92ff-f43d391d906&title=)

2. 为ACK命名空间中的应用开启MSE微服务治理 
   1. 登录[MSE治理中心控制台](https://mse.console.aliyun.com/#/msc/home)，如果您尚未开通 MSE 微服务治理，请根据提示开通。
   2. 在左侧导航栏选择**微服务治理中心** > **K8s集群列表**。
   3. 在K8s集群列表页面搜索框列表中选择集群名称或集群ID，然后输入相应的关键字，单击搜索图标。
   4. 单击目标集群操作列的**管理**。
   5. 在集群详情页面命名空间列表区域，单击目标命名空间操作列下的**开启微服务治理**。
   6. 在开启微服务治理对话框中单击确认。<br />![](https://intranetproxy.alipay.com/skylark/lark/0/2022/png/83415/1645599572233-fdbbc76c-f886-422e-ae85-cae46bbe71f4.png#clientId=u2960782d-e104-4&id=ShI5K&originHeight=566&originWidth=1647&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u18f9a05e-124f-4e5a-b38b-3f6029adb28&title=)
<a name="uNJ5K"></a>
### 步骤二：服务测试

1. 登录[MSE治理中心控制台](https://mse.console.aliyun.com/#/msc/home)，在页面左上角选择地域；
2. 左侧导航栏选择：微服务治理 -> 微服务测试 -> 服务测试；
3. 选择 服务名为“sc-A”的服务，点击测试，进入测试详情页；
4. 选择 Path为“/a”的请求，填写测试参数，点击执行 -> 查看返回结果，同时左侧可以展示历史记录；

![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2022/png/83415/1645604057155-9b33a7e3-00e2-4e20-8b39-604c0918ce3a.png?x-oss-process=image/format,png#clientId=u5e6e08f0-6b60-4&from=paste&height=582&id=gcbJS&originHeight=582&originWidth=1210&originalType=binary&ratio=1&rotation=0&showTitle=false&size=2117066&status=done&style=none&taskId=uc22de24a-66a6-4d80-9703-bc2c8928e1e&title=&width=1210)<br />![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2022/png/83415/1645604068251-ec220e44-7d33-48ff-95a3-a00fcf884a3d.png?x-oss-process=image/format,png#clientId=u5e6e08f0-6b60-4&from=paste&height=833&id=IRd1H&originHeight=833&originWidth=1210&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3028252&status=done&style=none&taskId=ud78589d3-5b15-4dda-a740-9a1d8c7cbe7&title=&width=1210)

<a name="aa5pY"></a>
### 步骤三：服务压测

1. 登录[MSE治理中心控制台](https://mse.console.aliyun.com/#/msc/home)，在页面左上角选择地域；
2. 左侧导航栏选择：微服务治理 -> 微服务测试 -> 服务压测 -> 创建场景；
3. 添加步骤
   1. 选择应用 -> 选择框架 -> 选择服务 -> 选择方法；
   2. 填写参数；
   3. 断言/出参提取；
4. 填写压测参数，点击确认；
5. 进入压测场景列表页，点击详情；
6. 进入压测详情页，点击启动，等待施压机准备就绪；
7. 点击详情，进入压测性能数据报告页，实时查看性能数据；

![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2022/png/83415/1645604814212-0cfccdcf-576d-4844-b81e-43c39a7cbcbf.png?x-oss-process=image/format,png#clientId=ub726e553-83c6-4&from=paste&height=828&id=PD3sa&originHeight=828&originWidth=1212&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3015062&status=done&style=none&taskId=u6aacfecf-03a5-4fb3-8f03-57fd03e7fc2&title=&width=1212)<br />![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2022/png/83415/1645604854156-b64b5582-99b7-462c-b01a-52654f90feeb.png?x-oss-process=image/format,png#clientId=ub726e553-83c6-4&from=paste&height=893&id=aae3A&originHeight=893&originWidth=1227&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3291612&status=done&style=none&taskId=uf75db5a7-8393-41d1-be4f-d1cb6acb822&title=&width=1227)<br />![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2022/png/83415/1645604926324-4245e411-2523-4a0b-8226-958528a39ec1.png?x-oss-process=image/format,png#clientId=ub726e553-83c6-4&from=paste&height=896&id=wYkgH&originHeight=896&originWidth=1229&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3308030&status=done&style=none&taskId=uae0bb04b-8703-4fbf-ad55-f2f6cd73d8b&title=&width=1229)

![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2022/png/83415/1645604937311-b641a28a-c606-4a08-8677-e4b16f7cfa3d.png?x-oss-process=image/format,png#clientId=ub726e553-83c6-4&from=paste&height=894&id=RkPIW&originHeight=894&originWidth=1227&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3295292&status=done&style=none&taskId=u7add54d0-ea16-41b4-98b6-b37e7c60e95&title=&width=1227)

<a name="Wucvj"></a>
### 步骤四：自动化回归（用例管理）

1. 登录[MSE治理中心控制台](https://mse.console.aliyun.com/#/msc/home)，在页面左上角选择地域；
2. 左侧导航栏选择：微服务治理 -> 微服务测试 -> 自动化回归（用例管理） -> 创建用例；
3. 添加步骤
   1. 选择应用 -> 选择框架 -> 选择服务 -> 选择方法；
   2. 填写参数；
   3. 断言/出参提取；
4. 可以添加多个步骤；
5. 保存用例；
6. 点击执行；
7. 通过执行历史，查看用例是否通过；

![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2022/png/83415/1645605249742-3c5ed428-b3fb-413b-a869-637244a32686.png?x-oss-process=image/format,png#clientId=u63185e14-1d29-4&from=paste&height=842&id=T5p3r&originHeight=842&originWidth=1229&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3108924&status=done&style=none&taskId=u17c49b82-1f0c-472a-937f-111542a726a&title=&width=1229)<br />![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2022/png/83415/1645605259339-9cd25a83-4fb2-45e9-a54b-4fea51b553f7.png?x-oss-process=image/format,png#clientId=u63185e14-1d29-4&from=paste&height=842&id=i8LAr&originHeight=842&originWidth=1229&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3108924&status=done&style=none&taskId=u507550d3-ebb0-47b0-889b-d66aa3fa98c&title=&width=1229)<br />![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2022/png/83415/1645605416352-105d6024-552a-4c73-a6f8-973fcc41b8aa.png?x-oss-process=image/format,png#clientId=u63185e14-1d29-4&from=paste&height=838&id=tniMP&originHeight=838&originWidth=1217&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3064000&status=done&style=none&taskId=u4de407a9-2457-4b91-a979-751e0d6ed48&title=&width=1217)
<a name="gFxBE"></a>
### 步骤五：自动化回归（用例集）

1. 登录[MSE治理中心控制台](https://mse.console.aliyun.com/#/msc/home)，在页面左上角选择地域；
2. 左侧导航栏选择：微服务治理 -> 微服务测试 -> 自动化回归（用例集） -> 创建用例集；
3. 选择已创建的用例集sc-a，点击 详情，进入用例集详情页；
4. 点击 关联用例，选择已创建的用例，进行关联；
5. 点击 执行用例集，进入 执行历史，查看用例集执行记录；
6. 点击 测试报告，查看测试报告详情；

![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2022/png/83415/1645605511836-b2e8097a-a687-443e-a7c6-caf0c74d93a7.png?x-oss-process=image/format,png#clientId=u63185e14-1d29-4&from=paste&height=843&id=icDQ2&originHeight=843&originWidth=1211&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3067082&status=done&style=none&taskId=u940e5f72-af3e-483a-afbc-210c8bf298c&title=&width=1211)<br />![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2022/png/83415/1645605799622-2c344dd6-e793-46ba-a733-13149a28a33b.png?x-oss-process=image/format,png#clientId=u63185e14-1d29-4&from=paste&height=843&id=OJQ6c&originHeight=843&originWidth=1218&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3084792&status=done&style=none&taskId=uaef55cf6-fa30-4aeb-a570-a021cc0cac1&title=&width=1218)<br />![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2022/png/83415/1645605807999-415f1b66-64aa-40bb-8ab9-f3f06a42af94.png?x-oss-process=image/format,png#clientId=u63185e14-1d29-4&from=paste&height=895&id=HMZ1d&originHeight=895&originWidth=1228&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3301658&status=done&style=none&taskId=uec7b95eb-9923-4bb4-a07d-18c95070e8c&title=&width=1228)<br />![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2022/png/83415/1645605819178-051f5cc5-dab8-4d54-b1bb-38dbfc0bbc2e.png?x-oss-process=image/format,png#clientId=u63185e14-1d29-4&from=paste&height=843&id=JcPYT&originHeight=843&originWidth=1214&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3074676&status=done&style=none&taskId=u3b5842bd-7f5a-4dc0-908d-643561ff56c&title=&width=1214)<br />![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2022/png/83415/1645605826324-cacd3ef8-bfc4-42c0-9600-4b0926a30cd4.png?x-oss-process=image/format,png#clientId=u63185e14-1d29-4&from=paste&height=841&id=ynhcG&originHeight=841&originWidth=1215&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3069916&status=done&style=none&taskId=u810922cd-3ab7-42b7-96af-28feb824b52&title=&width=1215)

<a name="cZUa4"></a>
### 步骤六：服务巡检

1. 登录[MSE治理中心控制台](https://mse.console.aliyun.com/#/msc/home)，在页面左上角选择地域；
2. 左侧导航栏选择：微服务治理 -> 微服务测试 -> 服务巡检 -> 创建巡检任务；
3. 选择需要巡检的应用 -> 选择框架 -> 选择服务 -> 选择方法；
4. 填写巡检参数及断言内容，点击确认；
5. 进入巡检任务列表页，点击启动，即开始巡检；
6. 巡检失败时，可以通过失败记录进行查看，也可以添加告警，通过钉钉、短信、邮件的方式告警；

![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2022/png/83415/1645607816435-982c4857-025e-4c1e-bcac-4a34bfd554c6.png?x-oss-process=image/format,png#clientId=u63185e14-1d29-4&from=paste&height=843&id=POeEp&originHeight=843&originWidth=1223&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3097438&status=done&style=none&taskId=ua893984b-d782-4afc-b262-7daf86cefca&title=&width=1223)<br />![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2022/png/83415/1645607824901-72660593-72ce-464e-a11c-ca9970b6d7d7.png?x-oss-process=image/format,png#clientId=u63185e14-1d29-4&from=paste&height=895&id=ZO2a5&originHeight=895&originWidth=1220&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3280178&status=done&style=none&taskId=u9141acbb-ebe8-4fc2-b415-7fc0b9461c8&title=&width=1220)<br />![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2022/png/83415/1645607832992-10536c87-b733-4da3-85b7-6af6de61e063.png?x-oss-process=image/format,png#clientId=u63185e14-1d29-4&from=paste&height=839&id=DuMmF&originHeight=839&originWidth=1212&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3055066&status=done&style=none&taskId=u790db377-11d7-4026-8f23-f3b3128269e&title=&width=1212)


<a name="vX7ak"></a>
### 步骤七：智能流量测试

1. 登录[MSE治理中心控制台](https://mse.console.aliyun.com/?spm=a2c4g.11186623.2.13.f90a6a60WiEx0N#/msc/home)。
2. 在左侧导航栏选择**微服务治理中心 > 微服务测试 > 智能流量测试**。
3. 在顶部菜单栏选择**地域**，然后在**应用名**文本框中输入应用名称，单击[![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2021/png/12065/1622636307829-fc752bf0-ba33-4243-a66a-b48338e50a0a.png#clientId=ubc3d26ab-7edd-4&from=paste&height=14&id=vPydi&originHeight=28&originWidth=26&originalType=url&ratio=1&rotation=0&showTitle=false&size=728&status=done&style=none&taskId=ue61907d1-64b9-4fd9-b0e7-12ae33efe42&title=&width=13)](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/9107870261/p272701.png)图标。
4. 在应用列表中单击目标应用**操作**列的**自动化回归录制**。
5. 在**录制流量**对话框中选择路径，然后单击**确认**。
6. 在**录制记录**页面，您可查看当前流量信息，包括应用名、流量入口、机器、录制时间等。[![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2021/png/12065/1622636307939-1049951e-7331-4628-9541-fe7449f765ec.png#clientId=ubc3d26ab-7edd-4&from=paste&height=187&id=zK8AX&originHeight=374&originWidth=1684&originalType=url&ratio=1&rotation=0&showTitle=false&size=35987&status=done&style=none&taskId=u8609d382-dd58-49d3-8dcf-8b6638825a3&title=&width=842)](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/0207870261/p272633.png)当前流量正在**录制中**，您可在**录制记录**页面执行以下操作：
   - 单击目标录制流量**操作**列下的**详情**，可在**流量详情**面板中查看请求信息、响应信息等。
   - 单击目标录制流量**操作**列下的**删除**，可删除该流量数据。
7. **可选：**在**录制记录**页面单击左上角**保存场景**，在**保存操作场景**对话框中输入场景名，单击**确定**。当前流量录制结果会自动保存至管理页面。
8. **可选：**在**录制记录**页面单击左上角**结束录制**。自动返回**智能流量测试**页面。
<a name="MAMkz"></a>
### 步骤八：服务Mock

1. 登录[MSE治理中心控制台](https://mse.console.aliyun.com/?spm=a2c4g.11186623.2.13.f90a6a60WiEx0N#/msc/home)。
2. 在左侧导航栏选择**微服务治理中心 > 服务Mock**。
3. 在顶部菜单栏选择**地域**，在**服务Mock**页面单击**创建服务Mock**。
4. 在**创建服务Mock**面板中填入相关参数，然后单击**确定**。
5. 直接访问依赖该Mock规则的API，判断Mock是否生效

![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2022/png/83415/1645612135568-ba918d62-b9f5-48b1-9c76-4850fceaf37e.png?x-oss-process=image/format,png#clientId=u0ccdc147-5ab8-4&from=paste&height=895&id=ub1878ede&originHeight=895&originWidth=1213&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3261376&status=done&style=none&taskId=u76fdf337-00be-4ccb-ba72-e740c8f1f7f&title=&width=1213)<br />![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2022/png/83415/1645612144728-fda881e0-c29c-4ef2-9614-f279c7357a75.png?x-oss-process=image/format,png#clientId=u0ccdc147-5ab8-4&from=paste&height=945&id=u6b0ac8c7&originHeight=945&originWidth=1215&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3449012&status=done&style=none&taskId=u8e44b98b-97c4-4a73-86dc-f0b2a7a802c&title=&width=1215)

